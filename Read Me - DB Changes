4/2/2018 - DB changes for Driver Tracking Mgt page

INSERT INTO PAGE (PAGECODE, DESCRIPTION, URL, SORTKEY, STATUS, LASTUPDATEDUSER) 
VALUES ('SCDT', 'Driver Tracking Mgt', '/viewDriverTracking', '89', 'ACT', 'admin');

INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCDT', 'VIEW', 'admin');

INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCDT', 'VIEW', 'admin');

INSERT INTO SECTIONPAGE (USERROLECODE, SECTIONCODE, PAGECODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCSC', 'SCDT', 'admin');

****************************************************************
5/2/2018 - DB changes for Driver Tracking Mgt page


CREATE TABLE MS_DRIVERS 
(
  DRIVERCODE VARCHAR2(5) NOT NULL 
, NAME VARCHAR2(64) 
, MOBILE VARCHAR2(16) 
, EMAIL VARCHAR2(255) 
, STATUS VARCHAR2(20) 
, VEHICAL_NO VARCHAR2(15) 
, PROFILE_IMG BLOB 
, LICENSE BLOB 
, INSURANCE BLOB 
, CONSTRAINT MS_DRIVERS_PK PRIMARY KEY 
  (
    DRIVERCODE 
  )
  ENABLE 
);

ALTER TABLE MS_DRIVERS
ADD CONSTRAINT MS_DRIVERS_FK1 FOREIGN KEY
(
  STATUS 
)
REFERENCES STATUS
(
  STATUSCODE 
)
ENABLE;


---------------------------------------- VEHICLE TYPE--------------------------------------


INSERT INTO PAGE (PAGECODE, DESCRIPTION, URL, SORTKEY, STATUS, LASTUPDATEDUSER) 
VALUES ('SCVT', 'Vehicle Type Mgt', '/viewVehicleType', '78', 'ACT', 'admin');

INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCVT', 'VIEW', 'admin');
INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCVT', 'ADD', 'admin');
INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCVT', 'UPDATE', 'admin');
INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCVT', 'DEL', 'admin');

INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCVT', 'VIEW', 'admin');
INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCVT', 'ADD', 'admin');
INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCVT', 'UPDATE', 'admin');
INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCVT', 'DEL', 'admin');

INSERT INTO SECTIONPAGE (USERROLECODE, SECTIONCODE, PAGECODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCSC', 'SCVT', 'admin');



  CREATE TABLE "VEHICLE_TYPE" 
   (	"ID" NUMBER NOT NULL ENABLE, 
	"DESCRIPTION" VARCHAR2(64 BYTE), 
	"PRICE_KM" NUMBER(6,2), 
	"PRICE_MIN" NUMBER(6,2), 
	"BASE_FARE" NUMBER(6,2), 
	"COMMISSION" NUMBER(4,2), 
	"PERSON_CAPACITY" NUMBER(2,0), 
	"STATUS" VARCHAR2(10 BYTE), 
	"CREATEDTIME" DATE, 
	"LASTUPDATEDTIME" DATE, 
	"LASTUPDATEDUSER" VARCHAR2(64 BYTE), 
	 PRIMARY KEY ("ID"), 
	 CONSTRAINT "VEHICLE_TYPE_FK1" FOREIGN KEY ("STATUS")
	  REFERENCES "STATUS" ("STATUSCODE") ENABLE
   )  ;

  CREATE OR REPLACE TRIGGER "VEHICLE_TYPE_TRG" 
BEFORE INSERT ON VEHICLE_TYPE 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT VEHICLE_TYPE_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "VEHICLE_TYPE_TRG" ENABLE;



-------------------------------------------------DRIVER----------------------------------------------



  CREATE TABLE "DRIVER" 
   (	"ID" NUMBER NOT NULL ENABLE, 
	"FIRSTNAME" VARCHAR2(64 BYTE), 
	"LASTNAME" VARCHAR2(64 BYTE), 
	"DATEOFBIRTH" DATE, 
	"ADDRESS" VARCHAR2(255 BYTE), 
	"NIC" VARCHAR2(16 BYTE), 
	"LICENCE" VARCHAR2(20 BYTE), 
	"EXPIRYDATE" DATE, 
	"TEL1" VARCHAR2(20 BYTE), 
	"TEL2" VARCHAR2(20 BYTE), 
	"EMAIL" VARCHAR2(128 BYTE), 
	"ACCOUNT" VARCHAR2(20 BYTE), 
	"IMG" BLOB,, 
	"STATUS" VARCHAR2(10 BYTE), 
	"CREATEDTIME" DATE, 
	"LASTUPDATEDTIME" DATE, 
	"LASTUPDATEDUSER" VARCHAR2(64 BYTE), 
	 PRIMARY KEY ("ID"), 
	 CONSTRAINT "DRIVER_FK1" FOREIGN KEY ("STATUS")
	  REFERENCES "STATUS" ("STATUSCODE") ENABLE
   )  ;

  CREATE OR REPLACE TRIGGER "DRIVER_TRG" 
BEFORE INSERT ON DRIVER 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT DRIVER_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "DRIVER_TRG" ENABLE;



INSERT INTO PAGE (PAGECODE, DESCRIPTION, URL, SORTKEY, STATUS, LASTUPDATEDUSER) 
VALUES ('SCDM', 'Driver Mgt', '/viewDriver', '78', 'ACT', 'admin');

INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCDM', 'VIEW', 'admin');
INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCDM', 'ADD', 'admin');
INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCDM', 'UPDATE', 'admin');
INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCDM', 'DEL', 'admin');

INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCDM', 'VIEW', 'admin');
INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCDM', 'ADD', 'admin');
INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCDM', 'UPDATE', 'admin');
INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCDM', 'DEL', 'admin');

INSERT INTO SECTIONPAGE (USERROLECODE, SECTIONCODE, PAGECODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCSC', 'SCDM', 'admin');



---------------------------------------------------------------------CUSTOMER--------------------------------------



  CREATE TABLE "CUSTOMER" 
   (	"ID" NUMBER NOT NULL ENABLE, 
	"FIRSTNAME" VARCHAR2(64 BYTE), 
	"LASTNAME" VARCHAR2(64 BYTE), 
	"NIC" VARCHAR2(16 BYTE), 
	"MOBILE" VARCHAR2(20 BYTE), 
	"EMAIL" VARCHAR2(128 BYTE), 
	"STATUS" VARCHAR2(10 BYTE), 
	"CREATEDTIME" DATE, 
	"LASTUPDATEDTIME" DATE, 
	"IMG" BLOB, 
	 PRIMARY KEY ("ID"), 
	 CONSTRAINT "CUSTOMER_FK1" FOREIGN KEY ("STATUS")
	  REFERENCES "STATUS" ("STATUSCODE") ENABLE
   ) ;

  CREATE OR REPLACE TRIGGER "CUSTOMER_TRG" 
BEFORE INSERT ON CUSTOMER 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT CUSTOMER_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "CUSTOMER_TRG" ENABLE;



INSERT INTO PAGE (PAGECODE, DESCRIPTION, URL, SORTKEY, STATUS, LASTUPDATEDUSER) 
VALUES ('SCRM', 'Customer Mgt', '/viewCustomer', '78', 'ACT', 'admin');

INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCRM', 'VIEW', 'admin');
INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCRM', 'UPDATE', 'admin');
INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCRM', 'DEL', 'admin');

INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCRM', 'VIEW', 'admin');
INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCRM', 'UPDATE', 'admin');
INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCRM', 'DEL', 'admin');

INSERT INTO SECTIONPAGE (USERROLECODE, SECTIONCODE, PAGECODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCSC', 'SCRM', 'admin');




-----------------------------------------------------TRIP------------------------------------------------------



  CREATE TABLE "TRIP" 
   (	"ID" NUMBER NOT NULL ENABLE, 
	"CUSTOMER" NUMBER, 
	"DRIVER" NUMBER, 
	"VEHICLE" NUMBER, 
	"SOURCE" VARCHAR2(255 BYTE), 
	"DESTINATION" VARCHAR2(255 BYTE), 
	"STARTEDTIME" DATE, 
	"ENDTIME" DATE, 
	"FARE" NUMBER(8,2), 
	"STATUS" VARCHAR2(10 BYTE), 
	"CREATEDTIME" DATE, 
	"LASTUPDATEDTIME" DATE, 
	 PRIMARY KEY ("ID"), 
	 CONSTRAINT "TRIP_FK1" FOREIGN KEY ("STATUS")
	  REFERENCES "STATUS" ("STATUSCODE") ENABLE, 
	 CONSTRAINT "TRIP_FK2" FOREIGN KEY ("CUSTOMER")
	  REFERENCES "CUSTOMER" ("ID") ENABLE, 
	 CONSTRAINT "TRIP_FK3" FOREIGN KEY ("DRIVER")
	  REFERENCES "DRIVER" ("ID") ENABLE, 
	 CONSTRAINT "TRIP_FK4" FOREIGN KEY ("VEHICLE")
	  REFERENCES "VEHICLE_TYPE" ("ID") ENABLE
   ) ;

  CREATE OR REPLACE TRIGGER "TRIP_TRG" 
BEFORE INSERT ON TRIP 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT TRIP_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "TRIP_TRG" ENABLE;




INSERT INTO PAGE (PAGECODE, DESCRIPTION, URL, SORTKEY, STATUS, LASTUPDATEDUSER) 
VALUES ('SCTM', 'Trip Mgt', '/viewTrip', '77', 'ACT', 'admin');

INSERT INTO PAGETASK (USERROLECODE, PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCTM', 'VIEW', 'admin');

INSERT INTO PAGETASK_TEMPLATE (PAGECODE, TASKCODE, LASTUPDATEDUSER) 
VALUES ('SCTM', 'VIEW', 'admin');

INSERT INTO SECTIONPAGE (USERROLECODE, SECTIONCODE, PAGECODE, LASTUPDATEDUSER) 
VALUES ('ADMIN', 'SCSC', 'SCTM', 'admin');

